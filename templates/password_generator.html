{% extends "default_template.html" %} 
    {% block main %}
    <div class="container mx-auto max-w-md p-12 bg-gray-900 rounded-lg shadow-lg">

        <h2 class="text-3xl font-bold text-center mb-6">Local Browser Password Generator</h2>

        <div class="mb-4">
            <label for="password" class="block text-sm font-medium mb-2">Generated Password:</label>
                <div class="flex items-start border border-gray-700 rounded-md">
                    <textarea id="password" readonly
                            class="px-3 py-3 bg-gray-800 text-white focus:outline-none min-w-full resize-none rounded-md"
                            rows="1"></textarea>
                    <button onclick="copyToClipboard()" class="copy-button px-2 py-1 bg-indigo-600 
                                                                hover:bg-indigo-700 rounded-r-md
                                                                focus:outline-none focus:ring focus:ring-indigo-500 transition duration-200">
                        <i class="fas fa-clipboard"></i>
                    </button>
                </div>
        </div>

        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Password Length:</label>
            <input type="range" id="length" min="8" max="128" value="16" class="w-full">
            <span id="length-value" class="text-sm ml-2">16</span>
        </div>

        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Include:</label>
            <div class="flex items-center">
                <input type="checkbox" id="letters" checked class="mr-2 accent-indigo-500">
                <label for="letters" class="mr-4">Letters</label>
                <input type="checkbox" id="numbers" checked class="mr-2 accent-indigo-500">
                <label for="numbers" class="mr-4">Numbers</label>
                <input type="checkbox" id="symbols" checked class="mr-2 accent-indigo-500">
                <label for="symbols" class="mr-4">Symbols</label>
            </div>
        </div>

        <button onclick="generatePassword()" class="w-full bg-indigo-600 hover:bg-indigo-700
                                                    text-white font-bold py-2 px-4 rounded-md
                                                    focus:outline-none focus:ring focus:ring-indigo-500
                                                    transition duration-200">
            Generate Password
        </button>
    </div>

    <script>
        const lengthEl = document.getElementById('length');
        const lengthValueEl = document.getElementById('length-value');
        const passwordOutput = document.getElementById('password');

        lengthEl.addEventListener('input', () => {
            lengthValueEl.textContent = lengthEl.value;
        });

        function generatePassword() {
            const length = parseInt(document.getElementById('length').value);
            const includeLetters = document.getElementById('letters').checked;
            const includeNumbers = document.getElementById('numbers').checked;
            const includeSymbols = document.getElementById('symbols').checked;

            const letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+~`|}{[]:;?><,./-=';
            let allCharacters = '';

            if (includeLetters) allCharacters += letters;
            if (includeNumbers) allCharacters += numbers;
            if (includeSymbols) allCharacters += symbols;

            let password = '';
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * allCharacters.length);
                password += allCharacters[randomIndex];
            }

            passwordOutput.value = password;

            // Adjust the height of the password field
            passwordOutput.style.height = 'auto'; 
            passwordOutput.style.height = (passwordOutput.scrollHeight) + 'px';
        }

        function copyToClipboard() {
            const password = document.getElementById('password');
            password.select();
            document.execCommand('copy');
            alert('Password copied to clipboard');
        }
    </script>
    {% endblock main %}